(()=>{var a=wp.i18n.__,i=wp.data.select,e=wp.hooks.addFilter,r=wp.element.Fragment,t={init:function(t){return function(e){return React.createElement(r,null,React.createElement("div",{className:"fip"},React.createElement("div",{className:"fip-editor-container"},React.createElement("div",{className:"fip-loading-bar"}),React.createElement("div",{className:"fip-output"}),React.createElement("p",null,a("Generate and attach a custom featured image using the Unsplash API.","featured-image-plus-pro")),React.createElement("input",{type:"hidden",name:"fip-current-post-id",value:i("core/editor").getCurrentPostId()}),React.createElement("p",null,React.createElement("select",{name:"fip-editor-image-source",className:"fip-custom-select"},React.createElement("option",{value:""},a("-- Select Source --","featured-image-plus-pro")),React.createElement("option",{value:"unsplash"},a("Unsplash","featured-image-plus-pro")))),React.createElement("p",null,React.createElement("select",{name:"fip-editor-image-keyword",className:"fip-custom-select",disabled:!0},React.createElement("option",{value:""},a("-- Select Keyword --","featured-image-plus-pro")))),React.createElement("p",null,React.createElement("select",{name:"fip-editor-image-option",className:"fip-custom-select",disabled:!0},React.createElement("option",{value:""},a("-- Select Image --","featured-image-plus-pro")))),React.createElement("div",{className:"fip-thumb-preview"}),React.createElement("p",null,React.createElement("button",{name:"fip-editor-image-attach",className:"components-button editor-post-featured-image__toggle",disabled:!0},a("Attach featured image","featured-image-plus-pro"))))),React.createElement(t,e))}}},o=(window._wpLoadBlockEditor&&window._wpLoadBlockEditor.then(function(){e("editor.PostFeaturedImage","featured-image-plus-pro/extend-featured-image-control",function(e){return t.init(e)})}),{}),o={pluginUrl:fip.plugin_ur,pluginDomain:fip.plugin_domain,ajaxUrl:fip.ajax_url,ajaxNonce:fip.ajax_nonce,generateRandomString:function(e){for(var t="",a=0;a<e;a++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return t}},u={ajaxRequest:function(e,t,a,i){jQuery.ajax({method:"post",url:o.ajaxUrl,data:jQuery.extend({action:e,_wpnonce:o.ajaxNonce},a),beforeSend:function(){return u.beforeSendCallback(t)},success:function(e){return i(JSON.parse(e)[0])},complete:function(){return u.completeCallback(t)},error:function(){return u.errorCallback(t)}})},beforeSendCallback:function(e){e.find(".fip-loading-bar").show()},completeCallback:function(e){e.find(".fip-loading-bar").hide()},errorCallback:function(e){var e=e.find(".fip-output").empty(),t='<storng>Internal Server Error!</strong><br />Contact your hosting provider and access your logs to learn more about what is causing the error; then the plugin author with the detials @ <a href="mailto:contact@'.concat(o.pluginDomain,'">contact@').concat(o.pluginDomain,"</a>.");e.addClass("fip-output-active fip-output-active-error"),e.html(t)},outputCallback:function(e,t,a){e=e.find(".fip-output").empty();e.removeClass("fip-output-active-success fip-output-active-error").addClass("fip-output-active-"+(1===t?"success":"error")),e.addClass("fip-output-active").show().html(a)}},n={checkImageSource:function(e){var e=jQuery(e.target),t=e.closest(".fip-editor-container"),a=jQuery(".fip-output"),i=jQuery(".fip-thumb-preview"),r=jQuery('select[name="fip-editor-image-keyword"]'),o=jQuery('select[name="fip-editor-image-option"]'),e={image_source:e.val()};u.ajaxRequest("fip_check_image_source",t,e,function(e){e&&!1===e.success||(0===e.status?(u.outputCallback(t,e.status,e.message),r.attr("disabled",!0).val(""),o.attr("disabled",!0).val(""),i.empty()):(a.empty().removeClass("fip-output-active-error fip-output-active"),r.attr("disabled",!1)))})},getPostKeywords:function(){var t=jQuery(".fip-editor-container"),a=jQuery(".fip-thumb-preview"),i=jQuery('select[name="fip-editor-image-keyword"]'),r=jQuery('select[name="fip-editor-image-option"]'),e={post_id:jQuery('input[name="fip-current-post-id"]').val()};u.ajaxRequest("fip_generate_post_keywords",t,e,function(e){e&&!1===e.success||(0===e.status?(u.outputCallback(t,e.status,e.message),r.attr("disabled",!0).val(""),a.empty()):(i.empty().html('<option value="">-- Select Keyword --</option>'+e.message),i.attr("disabled",!1)))})},getImageOptions:function(e){var t=jQuery(e.target).closest(".fip-editor-container"),a=jQuery(".fip-thumb-preview"),i=jQuery('select[name="fip-editor-image-option"]'),r=jQuery('button[name="fip-editor-image-attach"]'),e={post_id:jQuery('input[name="fip-current-post-id"]').val(),image_source:jQuery('select[name="fip-editor-image-source"]').val(),keyword:jQuery('select[name="fip-editor-image-keyword"]').val()};u.ajaxRequest("fip_get_image_options",t,e,function(e){e&&!1===e.success||(0===e.status?(u.outputCallback(t,e.status,e.message),i.attr("disabled",!0).val(""),r.attr("disabled",!0).val(""),a.empty()):(i.empty().html('<option value="">-- Select Image --</option>'+e.message),i.attr("disabled",!1)))})},attachImage:function(e){e.preventDefault();var a=jQuery(e.target).closest(".fip-editor-container"),i=jQuery(".fip-thumb-preview"),r=jQuery('select[name="fip-editor-image-source"]'),o=jQuery('select[name="fip-editor-image-keyword"]'),n=jQuery('select[name="fip-editor-image-option"]'),c=jQuery('button[name="fip-editor-image-attach"]'),e={post_id:jQuery('input[name="fip-current-post-id"]').val(),image_source:jQuery('select[name="fip-editor-image-source"]').val(),image_option:jQuery('select[name="fip-editor-image-option"] option:selected').data("image"),keyword:jQuery('select[name="fip-editor-image-keyword"]').val()};u.ajaxRequest("fip_save_attach_featured",a,e,function(e){var t;e&&!1===e.success||1!==e.status||(t=e.attachment_id,u.outputCallback(a,e.status,e.message),r.val(""),o.attr("disabled",!0).val(""),n.attr("disabled",!0).val(""),c.attr("disabled",!0).val(""),i.empty(),window._wpLoadBlockEditor?window._wpLoadBlockEditor.then(function(){wp.data.dispatch("core/editor").editPost({featured_media:t})}):setTimeout(function(){return document.location.reload(!0)},1e3))})},showThumbPreview:function(){var t=this,a=null,i=jQuery('button[name="fip-editor-image-attach"]'),e=setInterval(function(){var e=t.selectedIndex,e=jQuery(t).find("option").eq(e).attr("data-image");e&&e!==a&&(jQuery(t).css("backgroundImage","url("+e+")"),jQuery(".fip-thumb-preview").empty().html('<img src="'.concat(e,'" alt="" />')),i.attr("disabled",!1),a=e)},100);jQuery(t).on("blur",function(){clearInterval(e)})}};jQuery,t.init(),setTimeout(function(){n.getPostKeywords()},1e3),jQuery(document).on("change",'select[name="fip-editor-image-source"]',n.checkImageSource),jQuery(document).on("change",'select[name="fip-editor-image-keyword"]',n.getImageOptions),jQuery(document).on("click",'select[name="fip-editor-image-option"]',n.showThumbPreview),jQuery(document).on("click",'button[name="fip-editor-image-attach"]',n.attachImage)})();