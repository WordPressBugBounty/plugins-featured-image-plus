(()=>{function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var e,l={};l.ajaxUrl=fip.ajax_url,l.pluginUrl=fip.plugin_url,l.ajaxNonce=fip.ajax_nonce,l.bulkPostIds=[],l.selectBulkImages=function(e){var t,n,i,r=(e=>{var t,n,i,r,o,u="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(u)return i=!(n=!0),{s:function(){u=u.call(e)},n:function(){var e=u.next();return n=e.done,e},e:function(e){i=!0,t=e},f:function(){try{n||null==u.return||u.return()}finally{if(i)throw t}}};if(Array.isArray(e)||(u=((e,t)=>{var n;if(e)return"string"==typeof e?a(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0})(e)))return u&&(e=u),r=0,{s:o=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})(e);try{for(r.s();!(t=r.n()).done;)"attributes"!==t.value.type&&(n=jQuery("#bulk-titles-list li"),i=new Array,jQuery.each(n,function(e,t){i.push(jQuery(t).find("button").prop("id").replace("_",""))}),l.bulkPostIds=i)}catch(e){r.e(e)}finally{r.f()}},l.selectBulkImagesObserverMutation=function(){var e;jQuery("#bulk-titles").length&&(e=jQuery("#bulk-titles")[0],new MutationObserver(l.selectBulkImages).observe(e,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0}))},l.addFeaturedImage=function(){var t="",t=window.inlineEditPost.edit;window.inlineEditPost.edit=function(e){t.apply(this,arguments),l.inlineEdit(this,e)}},l.inlineEdit=function(e,t){var n,i=0;0<(i="object"===r(t)?parseInt(e.getId(t)):i)&&(e=jQuery("#post-"+i),t=jQuery("#edit-"+i),n=jQuery(".fip-thumb",e).prop("src"),l.attachFeaturedImage(t),jQuery('div[id^="__wp-uploader-id"]').remove(),jQuery("#fip-preview",t).prop("src",n),jQuery('input[name="_thumbnail_id"]',t).val(jQuery('input[name="fip-url"]',e).val()),jQuery('input[name="fip-url"]',t).val(n),jQuery('button[name="fip-button-remove"]',t).show().val(i),void 0===n)&&jQuery('button[name="fip-button-remove"]',t).hide()},l.attachBulkImage=function(e){e.preventDefault();var t,e=jQuery(e.target).closest("fieldset"),n=e.find("img#fip-preview"),i=e.find('input[name="fip-url"]'),r=e.find('input[name="_thumbnail_id"]'),o=e.find('button[name="fip-button-remove"]');t||(jQuery('div[id^="__wp-uploader-id"]').remove(),(t=wp.media.frames.meta_image_frame=wp.media({title:i.title,button:{text:i.button}})).on("select",function(){var e=t.state().get("selection").first().toJSON();i.val(e.url),r.val(e.id),o.val(e.id),n.prop("src",e.url),n.show(),i.show()})),t.open()},l.ajaxRequest=function(e,t,n,i){jQuery.ajax({method:"post",url:l.ajaxUrl,data:jQuery.extend({action:e,_wpnonce:l.ajaxNonce},n),beforeSend:function(){return l.beforeSendCallback(t)},success:function(e){return i(JSON.parse(e)[0])},complete:function(){return l.completeCallback(t)},error:function(){return l.errorCallback(t)}})},l.resetSettings=function(e){e.preventDefault();var t=jQuery(e.target).closest(".fip-admin");window.confirm("Are you sure you want to RESET ALL the options to their defaults?")&&l.ajaxRequest("fip_reset_options_default",t,"",function(e){e&&!1===e.success||(l.outputCallback(t,e.status,e.message),jQuery("html, body").animate({scrollTop:0},"fast"),setTimeout(function(){return document.location.reload(!0)},1e3))})},l.attachFeaturedImage=function(a){jQuery(document).on("click",'button[name="fip-button-upload-image"]',function(e){e.preventDefault();var t,n=a.prop("id").replace("edit-",""),i=a.find("img#fip-preview"),r=a.find('input[name="fip-url"]'),o=a.find('input[name="_thumbnail_id"]'),u=a.find('button[name="fip-button-remove"]');t||(jQuery('div[id^="__wp-uploader-id"]').remove(),(t=wp.media.frames.meta_image_frame=wp.media({title:r.title,button:{text:r.button}})).on("open",function(){var e=jQuery("<div/>").addClass("fip-admin");e.html('<div class="fip-loading-bar"></div>'),t.$el.append(e)}),t.on("select",function(){var e=t.state().get("selection").first().toJSON(),e=(r.val(e.url),o.val(e.id),u.val(e.id),i.prop("src",e.url),i.show(),r.show(),{id:n,thumb_id:e.id});l.ajaxRequest("fip_add_single_featured_image",t.$el,e,function(e){e&&!1===e.success||setTimeout(function(){return document.location.reload(!0)},1e3)})})),t.open()})},l.removeFeaturedImage=function(e){e.preventDefault();var t=jQuery(e.target),e=t.val(),n=jQuery("#edit-"+e),i=t.closest(".fip-admin"),e={id:e};window.confirm("Are you sure you want to REMOVE the featured image?")&&l.ajaxRequest("fip_remove_single_featured_image",i,e,function(e){n.find('input[name="fip-id"]').val(""),n.find('input[name="fip-thumb"]').val(""),n.find("#fip-preview").prop("src",""),t.hide(),jQuery('div[id^="__wp-uploader-id"]').remove(),n.find(".button.button-primary.save").trigger("click"),setTimeout(function(){return document.location.reload(!0)},400)})},l.removeBulkImages=function(e){e.preventDefault();var t=jQuery(e.target),e=t.closest(".fip-admin"),n={post_ids:l.bulkPostIds};window.confirm("Are you sure you want to REMOVE ALL featured images?")&&l.ajaxRequest("fip_remove_all_featured_images",e,n,function(e){e&&!1===e.success||(t.hide(),jQuery('div[id^="__wp-uploader-id"]').remove(),setTimeout(function(){return jQuery('input[type="submit"]#bulk_edit').trigger("click")},1e3))})},l.beforeSendCallback=function(e){e.find(".fip-loading-bar").show()},l.completeCallback=function(e){e.find(".fip-loading-bar").hide()},l.errorCallback=function(e){e=e.find(".fip-output").empty();e.addClass("fip-output-active fip-output-active-error"),e.html("Internal Server Error! Contact your hosting provider and access your logs to learn more about what is causing the error.")},l.outputCallback=function(e,t,n){e=e.find(".fip-output").empty();e.removeClass("fip-output-active-success fip-output-active-error").addClass("fip-output-active-"+(1===t?"success":"error")),e.addClass("fip-output-active").show().html(n)},l.handleSettingsNotices=function(){var e=jQuery(".notice.settings-error"),t=jQuery("#fip-output");jQuery('input[name="_wp_http_referer"][value*="page=fip_settings"]').length&&0<e.length&&t&&(t.html("\n      <strong>Options updated.</strong> Setting options have been saved and updated successfully.\n    "),t.addClass("notice-warning fip-output-active"),setTimeout(function(){return e.fadeOut()},2e3))},e=jQuery,l.selectBulkImagesObserverMutation(),void 0!==window.inlineEditPost&&void 0!==r(window.inlineEditPost)&&l.addFeaturedImage(),e(document).on("click",'button[name="fip-button-remove"]',l.removeFeaturedImage),e(document).on("click",'button[name="fip-button-upload-bulk-image"]',l.attachBulkImage),e(document).on("click",'button[name="fip-button-remove-bulk"]',l.removeBulkImages),e(document).on("click",'button[name="fip-reset-button"]',l.resetSettings),l.handleSettingsNotices()})();